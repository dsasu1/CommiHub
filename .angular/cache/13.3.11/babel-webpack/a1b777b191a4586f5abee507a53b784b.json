{"ast":null,"code":"import { Router } from '@angular/router';\nimport { StaffsService } from '../service/staff.service';\nimport { AppsessionService } from '../../service/appsession.service';\nimport { MessageDetail } from '../../model/utility.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../service/appsession.service\";\nimport * as i2 from \"../service/staff.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../common/directives/sweetalert.directive\";\nimport * as i6 from \"../../sharedcomponents/paging/pager.component\";\nimport * as i7 from \"@ngx-translate/core\";\n\nfunction StaffListComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"h5\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, \"NoDataToDisplay\"));\n  }\n}\n\nconst _c0 = function (a1) {\n  return [\"/managerole\", a1];\n};\n\nfunction StaffListComponent_div_2_a_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const itemData_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c0, itemData_r3.roleId));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 2, \"ManageRole\"));\n  }\n}\n\nfunction StaffListComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"div\", 7);\n    i0.ɵɵelement(3, \"div\", 8);\n    i0.ɵɵelementStart(4, \"div\", 9)(5, \"div\", 10);\n    i0.ɵɵelement(6, \"i\", 11);\n    i0.ɵɵelementStart(7, \"ul\", 12)(8, \"li\");\n    i0.ɵɵtemplate(9, StaffListComponent_div_2_a_9_Template, 3, 6, \"a\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"li\")(11, \"a\", 14);\n    i0.ɵɵlistener(\"onConfirm\", function StaffListComponent_div_2_Template_a_onConfirm_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const i_r4 = restoredCtx.index;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.ondeleteStaff(i_r4);\n    });\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"translate\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(14, \"div\", 15)(15, \"div\", 16);\n    i0.ɵɵelement(16, \"img\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 18)(18, \"h5\", 19);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 20);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"div\", 21)(23, \"div\", 22)(24, \"div\", 23)(25, \"div\", 24)(26, \"a\", 25)(27, \"div\", 26);\n    i0.ɵɵtext(28);\n    i0.ɵɵpipe(29, \"translate\");\n    i0.ɵɵpipe(30, \"translate\");\n    i0.ɵɵpipe(31, \"translate\");\n    i0.ɵɵelementEnd()()()()()()()()()();\n  }\n\n  if (rf & 2) {\n    const itemData_r3 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngIf\", itemData_r3.roleId != null);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 8, \"Delete\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", ctx_r1.GetImageUrl(itemData_r3.userPhoto), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(itemData_r3.userName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(itemData_r3.title);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate3(\"\", i0.ɵɵpipeBind1(29, 10, \"Role\"), \" \", i0.ɵɵpipeBind1(30, 12, \"Colon\"), \" \", i0.ɵɵpipeBind1(31, 14, ctx_r1.getRoleName(itemData_r3.roleName)), \"\");\n  }\n}\n\nfunction StaffListComponent_app_pager_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-pager\", 28);\n    i0.ɵɵlistener(\"onPaged\", function StaffListComponent_app_pager_3_Template_app_pager_onPaged_0_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.currentdata = $event;\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"dataList\", ctx_r2.availabledata);\n  }\n}\n\nexport let StaffListComponent = /*#__PURE__*/(() => {\n  class StaffListComponent {\n    constructor(appsession, staffRepo, router) {\n      this.appsession = appsession;\n      this.staffRepo = staffRepo;\n      this.router = router;\n      this.currentdata = new Array();\n    }\n\n    trackingBy(index, data) {\n      return data.id;\n    }\n\n    ngOnInit() {\n      this.subscription = this.staffRepo.staffListChange.subscribe(value => {\n        this.availabledata = value;\n\n        if (this.roleId != null && this.availabledata != null) {\n          this.availabledata = this.availabledata.filter(x => x.roleId == this.roleId);\n        }\n\n        if (this.availabledata != null) {\n          this.currentdata = this.appsession.paginate(this.availabledata, this.appsession.defaultPageSize, this.appsession.defaultPageSize);\n        }\n      });\n      this.loadData();\n    }\n\n    loadData() {\n      if (this.appsession.IsUserLoggedIn) {\n        this.staffRepo.loadStaffs(this.appsession.CurrentUser.userVM.id);\n      }\n    }\n\n    getRoleName(roleName) {\n      return roleName == null ? \"NoRole\" : roleName;\n    }\n\n    ondeleteStaff(index) {\n      if (this.currentdata[index].isDemoAccount) {\n        let message = new MessageDetail();\n        message.isInfo = true;\n        message.msg = this.appsession.getTranslated(\"DemoFunctionalityLimited\");\n        this.appsession.setGlobalHeaderMessage(message);\n        return;\n      }\n\n      if (this.roleId != null) {\n        this.staffRepo.deleteStaffRole(this.appsession.CurrentUser.userVM.id, this.currentdata[index].staffRoleId).subscribe(data => {\n          if (data) {\n            this.loadData();\n          }\n        });\n      } else {\n        this.staffRepo.deleteStaff(this.appsession.CurrentUser.userVM.id, this.currentdata[index].id).subscribe(data => {\n          if (data) {\n            this.loadData();\n          }\n        });\n      }\n    }\n\n    GetImageUrl(userPhoto) {\n      let result = this.appsession.getImageData(userPhoto, 'image', '../../../assets/img/avatar1.jpg');\n      return result;\n    }\n\n    navigateToRole(roleId) {\n      this.router.navigate(['/managerole', roleId]);\n      return;\n    }\n\n    ngOnDestroy() {\n      this.subscription.unsubscribe();\n    }\n\n  }\n\n  StaffListComponent.ɵfac = function StaffListComponent_Factory(t) {\n    return new (t || StaffListComponent)(i0.ɵɵdirectiveInject(i1.AppsessionService), i0.ɵɵdirectiveInject(i2.StaffsService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  StaffListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: StaffListComponent,\n    selectors: [[\"app-staff-list\"]],\n    inputs: {\n      roleId: \"roleId\"\n    },\n    decls: 4,\n    vars: 4,\n    consts: [[\"class\", \"ui-block text-center\", 4, \"ngIf\"], [1, \"row\"], [\"class\", \"col-xl-4 col-lg-6 col-md-6 col-sm-6 col-xs-6\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [3, \"dataList\", \"onPaged\", 4, \"ngIf\"], [1, \"ui-block\", \"text-center\"], [1, \"col-xl-4\", \"col-lg-6\", \"col-md-6\", \"col-sm-6\", \"col-xs-6\"], [1, \"ui-block\"], [1, \"friend-item\", \"fav-page\"], [1, \"friend-header-thumb_Cost\"], [1, \"friend-item-content\"], [1, \"more\"], [1, \"fa\", \"fa-ellipsis-h\"], [1, \"more-dropdown\"], [3, \"routerLink\", 4, \"ngIf\"], [\"PSSweetAlert\", \"\", 2, \"cursor\", \"pointer\", 3, \"onConfirm\"], [1, \"friend-avatar\"], [1, \"author-thumb\"], [\"alt\", \"author\", 2, \"max-height\", \"100px\", 3, \"src\"], [1, \"author-content\"], [1, \"h5\", \"author-name\"], [1, \"country\"], [1, \"swiper-container\"], [1, \"swiper-wrapper\"], [1, \"swiper-slide\"], [1, \"friend-count\"], [\"href\", \"#\", 1, \"friend-count-item\"], [1, \"h6\"], [3, \"routerLink\"], [3, \"dataList\", \"onPaged\"]],\n    template: function StaffListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, StaffListComponent_div_0_Template, 4, 3, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtemplate(2, StaffListComponent_div_2_Template, 32, 16, \"div\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, StaffListComponent_app_pager_3_Template, 1, 1, \"app-pager\", 3);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.currentdata.length < 1);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.currentdata)(\"ngForTrackBy\", ctx.trackingBy);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.availabledata);\n      }\n    },\n    directives: [i4.NgIf, i4.NgForOf, i3.RouterLinkWithHref, i5.PSSweetAlertDirective, i6.PagerComponent],\n    pipes: [i7.TranslatePipe],\n    encapsulation: 2\n  });\n  return StaffListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}