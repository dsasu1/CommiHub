{"ast":null,"code":"import { ReviewService } from '../service/review.service';\nimport { AppsessionService } from '../../service/appsession.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../service/appsession.service\";\nimport * as i2 from \"../service/review.service\";\nimport * as i3 from \"primeng/rating\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@ngx-translate/core\";\nexport let ReviewSummaryComponent = /*#__PURE__*/(() => {\n  class ReviewSummaryComponent {\n    constructor(appsession, reviewSource) {\n      this.appsession = appsession;\n      this.reviewSource = reviewSource;\n      this.availableReviews = new Array();\n      this.overallRatingAvg = 0;\n      this.staffRatingAvg = 0;\n      this.maintenanceRatingAvg = 0;\n      this.safetyRatingAvg = 0;\n      this.neighborRatingAvg = 0;\n      this.groundsRatingAvg = 0;\n      this.noiseRatingAvg = 0;\n      this.total = 0;\n    }\n\n    ngOnInit() {\n      this.subscription = this.reviewSource.reviewListChange.subscribe(value => {\n        this.availableReviews = value;\n\n        if (this.availableReviews != null && this.availableReviews.length > 0) {\n          this.total = this.availableReviews.length;\n          this.overallRatingAvg = this.availableReviews.map(item => item.overallRating).reduce((prev, next) => prev + next) / this.total;\n          this.staffRatingAvg = this.availableReviews.map(item => item.staffRating).reduce((prev, next) => prev + next) / this.total;\n          this.maintenanceRatingAvg = this.availableReviews.map(item => item.maintenanceRating).reduce((prev, next) => prev + next) / this.total;\n          this.safetyRatingAvg = this.availableReviews.map(item => item.safetyRating).reduce((prev, next) => prev + next) / this.total;\n          this.neighborRatingAvg = this.availableReviews.map(item => item.neighborRating).reduce((prev, next) => prev + next) / this.total;\n          this.groundsRatingAvg = this.availableReviews.map(item => item.groundsRating).reduce((prev, next) => prev + next) / this.total;\n          this.noiseRatingAvg = this.availableReviews.map(item => item.noiseRating).reduce((prev, next) => prev + next) / this.total;\n        }\n      });\n    }\n\n    ngOnDestroy() {\n      this.subscription.unsubscribe();\n    }\n\n  }\n\n  ReviewSummaryComponent.ɵfac = function ReviewSummaryComponent_Factory(t) {\n    return new (t || ReviewSummaryComponent)(i0.ɵɵdirectiveInject(i1.AppsessionService), i0.ɵɵdirectiveInject(i2.ReviewService));\n  };\n\n  ReviewSummaryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ReviewSummaryComponent,\n    selectors: [[\"app-review-summary\"]],\n    decls: 41,\n    vars: 39,\n    consts: [[1, \"ui-block\"], [1, \"ui-block-title\"], [1, \"first\"], [1, \"col-12\"], [1, \"form-group\"], [\"name\", \"overallRatingAvg\", \"readonly\", \"true\", \"iconOnClass\", \"fa-star bg-warning specialbtn\", \"iconOffClass\", \"fa-star specialbtn bg-grey\", 3, \"ngModel\", \"cancel\", \"ngModelChange\"], [\"name\", \"staffRatingAvg\", \"readonly\", \"true\", \"iconOnClass\", \"fa-star bg-warning specialbtn\", \"iconOffClass\", \"fa-star specialbtn bg-grey\", 3, \"ngModel\", \"cancel\", \"ngModelChange\"], [\"name\", \"maintenanceRatingAvg\", \"readonly\", \"true\", \"iconOnClass\", \"fa-star bg-warning specialbtn\", \"iconOffClass\", \"fa-star specialbtn bg-grey\", 3, \"ngModel\", \"cancel\", \"ngModelChange\"], [\"name\", \"safetyRatingAvg\", \"readonly\", \"true\", \"iconOnClass\", \"fa-star bg-warning specialbtn\", \"iconOffClass\", \"fa-star specialbtn bg-grey\", 3, \"ngModel\", \"cancel\", \"ngModelChange\"], [\"name\", \"neighborRatingAvg\", \"readonly\", \"true\", \"iconOnClass\", \"fa-star bg-warning specialbtn\", \"iconOffClass\", \"fa-star specialbtn bg-grey\", 3, \"ngModel\", \"cancel\", \"ngModelChange\"], [\"name\", \"groundsRatingAvg\", \"readonly\", \"true\", \"iconOnClass\", \"fa-star bg-warning specialbtn\", \"iconOffClass\", \"fa-star specialbtn bg-grey\", 3, \"ngModel\", \"cancel\", \"ngModelChange\"], [\"name\", \"noiseRatingAvg\", \"readonly\", \"true\", \"iconOnClass\", \"fa-star bg-warning specialbtn\", \"iconOffClass\", \"fa-star specialbtn bg-grey\", 3, \"ngModel\", \"cancel\", \"ngModelChange\"]],\n    template: function ReviewSummaryComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h5\", 2);\n        i0.ɵɵtext(3);\n        i0.ɵɵpipe(4, \"translate\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 3)(6, \"div\", 4)(7, \"h5\", 2);\n        i0.ɵɵtext(8);\n        i0.ɵɵpipe(9, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"p-rating\", 5);\n        i0.ɵɵlistener(\"ngModelChange\", function ReviewSummaryComponent_Template_p_rating_ngModelChange_10_listener($event) {\n          return ctx.overallRatingAvg = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\", 4)(12, \"h5\", 2);\n        i0.ɵɵtext(13);\n        i0.ɵɵpipe(14, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"p-rating\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function ReviewSummaryComponent_Template_p_rating_ngModelChange_15_listener($event) {\n          return ctx.staffRatingAvg = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\", 4)(17, \"h5\", 2);\n        i0.ɵɵtext(18);\n        i0.ɵɵpipe(19, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"p-rating\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function ReviewSummaryComponent_Template_p_rating_ngModelChange_20_listener($event) {\n          return ctx.maintenanceRatingAvg = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(21, \"div\", 4)(22, \"h5\", 2);\n        i0.ɵɵtext(23);\n        i0.ɵɵpipe(24, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"p-rating\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function ReviewSummaryComponent_Template_p_rating_ngModelChange_25_listener($event) {\n          return ctx.safetyRatingAvg = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"div\", 4)(27, \"h5\", 2);\n        i0.ɵɵtext(28);\n        i0.ɵɵpipe(29, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"p-rating\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function ReviewSummaryComponent_Template_p_rating_ngModelChange_30_listener($event) {\n          return ctx.neighborRatingAvg = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(31, \"div\", 4)(32, \"h5\", 2);\n        i0.ɵɵtext(33);\n        i0.ɵɵpipe(34, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"p-rating\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function ReviewSummaryComponent_Template_p_rating_ngModelChange_35_listener($event) {\n          return ctx.groundsRatingAvg = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(36, \"div\", 4)(37, \"h5\", 2);\n        i0.ɵɵtext(38);\n        i0.ɵɵpipe(39, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"p-rating\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function ReviewSummaryComponent_Template_p_rating_ngModelChange_40_listener($event) {\n          return ctx.noiseRatingAvg = $event;\n        });\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(4, 23, \"TotalReviews\"), \" (\", ctx.total, \")\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(9, 25, \"Overall\"), \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.overallRatingAvg)(\"cancel\", false);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(14, 27, \"Staff\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.staffRatingAvg)(\"cancel\", false);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(19, 29, \"Maintenance\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.maintenanceRatingAvg)(\"cancel\", false);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(24, 31, \"Safety\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.safetyRatingAvg)(\"cancel\", false);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(29, 33, \"Neighborhood\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.neighborRatingAvg)(\"cancel\", false);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(34, 35, \"Grounds\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.groundsRatingAvg)(\"cancel\", false);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(39, 37, \"Noise\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.noiseRatingAvg)(\"cancel\", false);\n      }\n    },\n    directives: [i3.Rating, i4.NgControlStatus, i4.NgModel],\n    pipes: [i5.TranslatePipe],\n    encapsulation: 2\n  });\n  return ReviewSummaryComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}