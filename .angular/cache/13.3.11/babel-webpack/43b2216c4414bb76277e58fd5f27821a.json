{"ast":null,"code":"import { Router } from '@angular/router';\nimport { RolesService } from '../service/role.service';\nimport { AppsessionService } from '../../service/appsession.service';\nimport { MessageDetail } from '../../model/utility.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../service/appsession.service\";\nimport * as i2 from \"../service/role.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../common/directives/sweetalert.directive\";\nimport * as i6 from \"../../sharedcomponents/paging/pager.component\";\nimport * as i7 from \"@ngx-translate/core\";\n\nfunction RolelistComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"h5\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, \"NoDataToDisplay\"));\n  }\n}\n\nfunction RolelistComponent_div_2_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵelement(1, \"i\", 25);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, \"HasManagementRights\"));\n  }\n}\n\nconst _c0 = function (a1, a2) {\n  return {\n    \"fa\": true,\n    \"fa-check text-success\": a1,\n    \"fa-close text-danger\": a2\n  };\n};\n\nconst _c1 = function (a1) {\n  return [\"/managerole\", a1];\n};\n\nfunction RolelistComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"div\", 7)(3, \"div\", 8)(4, \"div\", 9);\n    i0.ɵɵelement(5, \"i\", 10);\n    i0.ɵɵelementStart(6, \"ul\", 11)(7, \"li\")(8, \"a\", 12);\n    i0.ɵɵlistener(\"onConfirm\", function RolelistComponent_div_2_Template_a_onConfirm_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const i_r4 = restoredCtx.index;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.ondeleteRole(i_r4);\n    });\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"translate\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(11, \"div\", 13);\n    i0.ɵɵelement(12, \"div\", 14);\n    i0.ɵɵelementStart(13, \"div\", 15)(14, \"h5\", 16);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 17);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(18, RolelistComponent_div_2_div_18_Template, 4, 3, \"div\", 18);\n    i0.ɵɵelementStart(19, \"div\", 17);\n    i0.ɵɵelement(20, \"i\", 19);\n    i0.ɵɵtext(21);\n    i0.ɵɵpipe(22, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(23, \"div\", 20)(24, \"div\", 21)(25, \"div\", 22)(26, \"div\", 23)(27, \"a\", 24);\n    i0.ɵɵtext(28);\n    i0.ɵɵpipe(29, \"translate\");\n    i0.ɵɵelementEnd()()()()()()()()();\n  }\n\n  if (rf & 2) {\n    const itemData_r3 = ctx.$implicit;\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(10, 8, \"Delete\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(itemData_r3.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(itemData_r3.roleDesc);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", itemData_r3.hasManagementRights);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(14, _c0, itemData_r3.isValid, !itemData_r3.isValid));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(22, 10, \"Valid\"), \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(17, _c1, itemData_r3.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(29, 12, \"Manage\"), \" \");\n  }\n}\n\nfunction RolelistComponent_app_pager_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-pager\", 26);\n    i0.ɵɵlistener(\"onPaged\", function RolelistComponent_app_pager_3_Template_app_pager_onPaged_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.currentdata = $event;\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"dataList\", ctx_r2.availabledata);\n  }\n}\n\nexport let RolelistComponent = /*#__PURE__*/(() => {\n  class RolelistComponent {\n    constructor(appsession, rolesRepo, router) {\n      this.appsession = appsession;\n      this.rolesRepo = rolesRepo;\n      this.router = router;\n      this.currentdata = new Array();\n    }\n\n    trackingBy(index, data) {\n      return data.id;\n    }\n\n    ngOnInit() {\n      this.subscription = this.rolesRepo.availableRoleListChange.subscribe(value => {\n        this.availabledata = value;\n\n        if (this.availabledata != null) {\n          this.currentdata = this.appsession.paginate(this.availabledata, this.appsession.defaultPageSize, this.appsession.defaultPageSize);\n        }\n      });\n      this.loadData();\n    }\n\n    loadData() {\n      if (this.appsession.IsUserLoggedIn) {\n        this.rolesRepo.loadAvailableRoles(this.appsession.CurrentUser.userVM.id);\n      }\n    }\n\n    navigateToRole(role) {\n      this.appsession.editItem = role;\n      this.router.navigate(['/managerole', role.id]);\n      return;\n    }\n\n    ondeleteRole(index) {\n      if (this.currentdata[index].isDemoAccount) {\n        let message = new MessageDetail();\n        message.isInfo = true;\n        message.msg = this.appsession.getTranslated(\"DemoFunctionalityLimited\");\n        this.appsession.setGlobalHeaderMessage(message);\n        return;\n      }\n\n      this.rolesRepo.deleteAvailableRole(this.appsession.CurrentUser.userVM.id, this.currentdata[index].id).subscribe(data => {\n        if (data) {\n          this.loadData();\n        }\n      });\n    }\n\n    ngOnDestroy() {\n      this.subscription.unsubscribe();\n    }\n\n  }\n\n  RolelistComponent.ɵfac = function RolelistComponent_Factory(t) {\n    return new (t || RolelistComponent)(i0.ɵɵdirectiveInject(i1.AppsessionService), i0.ɵɵdirectiveInject(i2.RolesService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  RolelistComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RolelistComponent,\n    selectors: [[\"app-rolelist\"]],\n    decls: 4,\n    vars: 4,\n    consts: [[\"class\", \"ui-block text-center\", 4, \"ngIf\"], [1, \"row\"], [\"class\", \"col-xl-4 col-lg-6 col-md-6 col-sm-6 col-xs-6\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [3, \"dataList\", \"onPaged\", 4, \"ngIf\"], [1, \"ui-block\", \"text-center\"], [1, \"col-xl-4\", \"col-lg-6\", \"col-md-6\", \"col-sm-6\", \"col-xs-6\"], [1, \"ui-block\"], [1, \"friend-item\"], [1, \"friend-item-content\"], [1, \"more\"], [1, \"fa\", \"fa-ellipsis-h\"], [1, \"more-dropdown\"], [\"PSSweetAlert\", \"\", 2, \"cursor\", \"pointer\", 3, \"onConfirm\"], [1, \"friend-avatar\"], [1, \"author-thumb\"], [1, \"author-content\"], [1, \"author-name\"], [1, \"country\"], [\"class\", \"country\", 4, \"ngIf\"], [3, \"ngClass\"], [\"data-slide\", \"fade\", 1, \"swiper-container\"], [1, \"swiper-wrapper\"], [1, \"swiper-slide\"], [1, \"control-block-button\"], [1, \"btn\", \"bg-blue\", 3, \"routerLink\"], [1, \"fa\", \"fa-check\", \"text-success\"], [3, \"dataList\", \"onPaged\"]],\n    template: function RolelistComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, RolelistComponent_div_0_Template, 4, 3, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtemplate(2, RolelistComponent_div_2_Template, 30, 19, \"div\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, RolelistComponent_app_pager_3_Template, 1, 1, \"app-pager\", 3);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.currentdata.length < 1);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.currentdata)(\"ngForTrackBy\", ctx.trackingBy);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.availabledata);\n      }\n    },\n    directives: [i4.NgIf, i4.NgForOf, i5.PSSweetAlertDirective, i4.NgClass, i3.RouterLinkWithHref, i6.PagerComponent],\n    pipes: [i7.TranslatePipe],\n    encapsulation: 2\n  });\n  return RolelistComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}